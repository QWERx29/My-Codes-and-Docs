## 第三节          最短路径算法         第四节          图的连通性问题

##### *Problem#1* 最短路径问题

###### 【题目描述】

平面上有n个点（n<=100），每个点的坐标均在-10000~10000之间。其中的一些点之间有连线。若有连线，则表示可从一个点到达另一个点，即两点间有通路，通路的距离为两点间的直线距离。现在的任务是找出从一点到另一点之间的最短路径。

###### 【输入格式】

第一行一个整数n。 此后的n行，每行两个整数x和y，描述了一个点的坐标。（第i+1行描述的是第i个点） 第n+2行一个整数m，表示图中连线的个数。 此后的m行，每行描述一条连线，由两个整数i和j组成，表示第i个点和第j个点之间有连线。 最后一行两个整数s和t，分别表示源点和目标点。

###### 【输出格式】

仅一行，一个实数（保留两位小数），表示从s到t的最短路径长度。

###### 【样例】

```
**样例输入**
5
0 0
2 0
2 2
0 2
3 1
5
1 2
1 3
1 4
2 5
3 5
1 5
**样例输出**
3.41  
```



##### *Problem#2* 牛的旅行

###### 【题目描述】

农民John的农场里有很多牧区。有的路径连接一些特定的牧区。一片所有连通的牧区称为一个牧场。但是就目前而言，你能看到至少有两个牧区不连通。这样，农民John就有多个牧区了。
John想在农场里添加一条路径(注意，恰好一条)。对这条路径有以下限制：

![img](http://faioj.brynhild.online/images/1039m/1.jpg)

一个牧场的直径就是牧场中最远的两个牧区的距离(本题中所提到的所有距离指的都是最短的距离)。考虑如下的有5个牧区的牧场，牧区用“*”表示，路径用直线表示。每一个牧区都有自己的坐标：
这个牧场的直径大约是12.07106, 最远的两个牧区是A和E，它们之间的最短路径是A-B-E。 　　
这里是另一个牧场：

![img](http://faioj.brynhild.online/images/1039m/2.jpg)

这两个牧场都在John的农场上。John将会在两个牧场中各选一个牧区，然后用一条路径连起来，使得连通后这个新的更大的牧场有最小的直径。
注意，如果两条路径中途相交，我们不认为它们是连通的。只有两条路径在同一个牧区相交，我们才认为它们是连通的。
输入文件包括牧区、它们各自的坐标，还有一个如下的对称邻接矩阵：

```
  A B C D E F G H
A 0 1 0 0 0 0 0 0
B 1 0 1 1 1 0 0 0
C 0 1 0 0 1 0 0 0
D 0 1 0 0 1 0 0 0
E 0 1 1 1 0 0 0 0
F 0 0 0 0 0 0 1 0
G 0 0 0 0 0 1 0 1
H 0 0 0 0 0 0 1 0
```

输入文件至少包括两个不连通的牧区。
请编程找出一条连接两个不同牧场的路径，使得连上这条路径后，这个更大的新牧场有最小的直径。

###### 【输入格式】

第1行: 一个整数N (1 <= N <= 150), 表示牧区数 第2到N+1行: 每行两个整数X,Y (0 <= X ,Y<= 100000), 表示N个牧区的坐标。注意每个 牧区的坐标都是不一样的。 第N+2行到第2*N+1行: 每行包括N个数字(0或1) 表示如上文描述的对称邻接矩阵。

###### 【输出格式】

只有一行，包括一个实数，表示所求答案。数字保留六位小数。

###### 【样例】

```
**样例输入**
8
10 10
15 10
20 10
15 15
20 15
30 15
25 10
30 10
01000000
10111000
01001000
01001000
01110000
00000010
00000101
00000010
**样例输出**
22.071068
```

##### *Problem#3* 医院设置

###### 【题目描述】

设有一棵二叉树，如下图：

![img](http://faioj.brynhild.online/images/1175m/1.jpg)

其中，圈中的数字表示结点中居民的人口。圈边上数字表示结点编号，现在要求在某个结点上建立一个医院，使所有居民所走的路程之和为最小，同时约定，相邻接点之间的距离为1。如下图中，若医院建在： 1处，则距离和=4+12+220+240=136 3处，则距离和=4*2+13+20+40=81 …………

###### 【输入格式】

第一行一个整数n，表示树的结点数。（n<=100） 接下来的n行每行描述了一个结点的状况，包含三个整数，整数之间用空格（一个或多个）分隔，其中：第一个数为居民人口数；第二个数为左链接，为0表示无链接；第三个数为右链接。

###### 【输出格式】

一个整数，表示最小距离和。

###### 【样例】

```
**样例输入**
5 
13 2 3 
4 0 0 
12 4 5 
20 0 0 
40 0 0
**样例输出**
81
```

##### *Problem#4* 小规模稠密图的单源最短路

###### 【题目描述】

给出一个节点数为n的较稠密带权无向图以及一个起点v，求起点到所有不包括它本身的节点的最短路径，如果没有则输出0。

###### 【输入格式】

第一行为节点数n(1<=n<=150)； 第二行为起点v； 接下来的n行为一个邻接矩阵表示的图，0表示这两个节点间没有边。

###### 【输出格式】

n-1行，为起点到所有不包括它本身的节点的最短路径。

###### 【样例】

```
**样例输入**
4
1
0 20 60 0
20 0 30 0
60 30 0 0
0 0 0 0
**样例输出**
20
50
0
```

##### *Problem#5* 最小花费

###### 【题目描述】

在n个人中，某些人的银行账号之间可以互相转账。这些人之间转账的手续费各不相同。给定这些人之间转账时需要从转账金额里扣除百分之几的手续费，请问A最少需要多少钱使得转账后B收到100元。

###### 【输入格式】

第一行输入两个正整数n,m，分别表示总人数和可以互相转账的人的对数。 以下m行每行输入三个正整数x,y,z，表示标号为x的人和标号为y的人之间互相转账需要扣除z%的手续费 (z<100)。 最后一行输入两个正整数A,B。数据保证A与B之间可以直接或间接地转账。

###### 【输出格式】

输出A使得B到账100元最少需要的总费用。精确到小数点后8位。

###### 【样例】

```
**样例输入**
3 3
1 2 1
2 3 2
1 3 3
1 3
**样例输出**
103.07153164
```

##### *Problem#6* 非负权单源最短路

###### 【题目描述】

给一个n(1≤n≤2500)个点m(1≤m≤6200)条边的无向图，求 s 到 l 的最短路。

###### 【输入格式】

第一行四个由空格隔开的整数n、m、s、l。

之后的m行，每行三个正整数s_i、l_i、w_i，表示一条从s_i到l_i长度为w_i的边。

###### 【输出格式】

一个整数表示从m到n的最短路长度。数据保证至少存在一条道路。

###### 【样例】

```
**样例输入**
7 11 5 4
2 4 2
1 4 3
7 2 2
3 4 3
5 7 5
7 3 3
6 1 1
6 3 4
2 4 3
5 6 3
7 2 1
**样例输出**
7
```



##### *Problem#7* 香甜的黄油

###### 【题目描述】

农夫John发现做出全威斯康辛州最甜的黄油的方法：糖。把糖放在一片牧场上，他知道N（1<=N<=500）只奶牛会过来舔它，这样就能做出能卖好价钱的超甜黄油。当然，他将付出额外的费用在奶牛上。

农夫John很狡猾。像以前的Pavlov，他知道他可以训练这些奶牛，让它们在听到铃声时去一个特定的牧场。他打算将糖放在那里然后下午发出铃声，以至他可以在晚上挤奶。

农夫John知道每只奶牛都在各自喜欢的牧场（一个牧场不一定只有一头牛）。给出各头牛在的牧场和牧场间的路线，找出使所有牛到达的路程和最短的牧场（他将把糖放在那）

###### 【输入格式】

第一行: 三个数：奶牛数N，牧场数（2<=P<=800），牧场间道路数C(1<=C<=1450)

第二行到第N+1行: 1到N头奶牛所在的牧场号

第N+2行到第N+C+1行： 每行有三个数：相连的牧场A、B，两牧场间距离D（1<=D<=255），当然,连接是双向的

###### 【输出格式】

一行 输出奶牛必须行走的最小的距离和

###### 【样例】

```
**输入样例**
3 4 5
2
3
4
1 2 1
1 3 5
2 3 7
2 4 3
3 4 5
**输出样例**
8
{说明： 放在4号牧场最优 }
```

##### *Problem#8* 最短路径问题（输出路径）

###### 【题目描述】

平面上有n个点（n<=100），每个点的坐标均在-10000~10000之间。其中的一些点之间有连线。若有连线，则表示可从一个点到达另一个点，即两点间有通路，通路的距离为两点间的直线距离。现在的任务是找出从一点到另一点之间的最短路径。

###### 【输入格式】

第一行一个整数n。 此后的n行，每行两个整数x和y，描述了一个点的坐标。（第i+1行描述的是第i个点） 第n+2行一个整数m，表示图中连线的个数。 此后的m行，每行描述一条连线，由两个整数i和j组成，表示第i个点和第j个点之间有连线。 最后一行两个整数s和t，分别表示源点和目标点。

###### 【输出格式】

仅一行，一个实数（保留两位小数），表示从s到t的最短路径长度。

###### 【样例】

```
**样例输入**
5
0 0
2 0
2 2
0 2
3 1
5
1 2
1 3
1 4
2 5
3 5
1 5  
**样例输出**
3.41
1->2->5
```



##### *Problem#9* 大规模稀疏图的单源最短路

###### 【题目描述】

给出一个节点数为n、边数为m的较稀疏带权有向图，以及起点v0、终点v1求节点1到节点n的最短路径，如果没有则输出0。

###### 【输入格式】

第一行两个整数n(1<=n<=10000)，m(1<=m<=100000)，分别表示节点数和边数； 以下m行，每行三个数i，j，w，表示i和j两个点间的边权为w； 最后一行为两个整数v0，v1，分别表示起点和终点。

###### 【输出格式】

1行，为起点到所有不包括它本身的节点的最短路径。

###### 【样例】

```
**输入样例**
4 4
1 2 3
2 4 10
1 3 5
3 4 5
1 4
**输出样例**
10
```



##### *Problem#10* 刻录光盘

###### 【题目描述】

在FJOI2010夏令营快要结束的时候，很多营员提出来要把整个夏令营期间的资料刻录成一张光盘给大家，以便大家回去后继续学习。组委会觉得这个主意不错！可是组委会一时没有足够的空光盘，没法保证每个人都能拿到刻录上资料的光盘，怎么办呢？！ 　　

DYJ分析了一下所有营员的地域关系，发现有些营员是一个城市的，其实他们只需要一张就可以了，因为一个人拿到光盘后，其他人可以带着U盘之类的东西去拷贝啊！ 　　

他们愿意某一些人到他那儿拷贝资料，当然也可能不愿意让另外一些人到他那儿拷贝资料，这与我们FJOI宣扬的团队合作精神格格不入！！！ 　　

现在假设总共有N个营员（2<=N<=200），每个营员的编号为1~N。DYJ给每个人发了一张调查表，让每个营员填上自己愿意让哪些人到他那儿拷贝资料。当然，如果A愿意把资料拷贝给B，而B又愿意把资料拷贝给C，则一旦A获得了资料，则B，C都会获得资料。 　　

现在，请你编写一个程序，根据回收上来的调查表，帮助DYJ计算出组委会至少要刻录多少张光盘，才能保证所有营员回去后都能得到夏令营资料？

###### 【输入格式】

先是一个数N，接下来的N行，分别表示各个营员愿意把自己获得的资料拷贝给其他哪些营员。即输入数据的第i+1行表示第i个营员愿意把资料拷贝给那些营员的编号，以一个0结束。如果一个营员不愿意拷贝资料给任何人，则相应的行只有1个0，一行中的若干数之间用一个空格隔开。

###### 【输出格式】

一个正整数，表示最少要刻录的光盘数。

###### 【样例】

```
**输入样例**
5
2 4 3 0
4 5 0
0
0
1 0
**输出样例**
1
```

##### *Problem#11* 最优乘车

###### 【题目描述】

H城是一个旅游胜地，每年都有成千上万的人前来观光。为方便游客，巴士公司在各个旅游景点及宾馆、饭店等地都设置了巴士站并开通了一些单程巴士线路。每条单程巴士线路从某个巴士站出发，依次途经若干个巴士站，最终到达终点巴士站。 一名旅客最近到H城旅游，他很想去S公园游玩，但如果从他所在的饭店没有一路巴士可以直接到达S公园，则他可能要先乘某一路巴士坐几站，再下来换乘同一站台的另一路巴士, 这样换乘几次后到达S公园。 现在用整数1,2,…N 给H城的所有的巴士站编号，约定这名旅客所在饭店的巴士站编号为1，S公园巴士站的编号为N。 写一个程序，帮助这名旅客寻找一个最优乘车方案,使他在从饭店乘车到S公园的过程中换车的次数最少。

###### 【输入格式】

文件的第1行是一个数字M（1≤M≤100）表示开通了M条单向巴士线路，第2行是一个数字N（1 < N ≤ 500），表示共有N个车站。从第3行到第M+2行依次给出了第一条到第M条巴士线路的信息。其中第i+2行给出的是第i条巴士线路的信息，从左至右依次按行行驶顺序给出了该线路上的所有站点，相邻两个站号之间用一个空格隔开。

###### 【输出格式】

文件只有一行，为最少换车次数（在0，1，…，M-1中取值），0表示不需换车即可达到。如果无法乘车达到S公园，则输出“NO”。

###### 【样例】

```
**输入样例**
3 
7
6 7
4 7 3 6
2 1 3 5  
**输出样例**
2
```

##### *Problem#12* 最小环问题

###### 【题目描述】

给出一个图G=(V, E)，请写一个程序输出最小环。顶点的标号从1到n（n为图G的顶点数）。 最小环就是指在一张图中找出一个环，使得这个环上的各条边的权值之和最小。

###### 【输入格式】

第一行，n,m，表示定点数和边数.（n<=100） 以下m行，分别为a,b,c三个变量，表示顶点a到顶点b的权值为c

###### 【输出格式】

一行，一个数最小环的值，如果没有则输出“no”。

###### 【样例】

```
**输入样例**
3 3
1 2 3
2 3 3
3 1 3
**输出样例**
9
```

##### *Problem#13* 有向图的强连通分量

###### 【题目描述】

给出一个有向图G=(V,E)，请写一个程序就出图的强连通分量。顶点的标号1从n到（为n图G的顶点数）。

###### 【输入格式】

第一行，n,m，表示定点数和边数.

以下m行，分别为a,b两个变量，表示顶点a到顶点b有弧

###### 【输出格式】

一行，强连通分量的个数

###### 【样例】

```
**输入样例**
5 7
1 4
2 1
2 5
3 2
4 1
5 1 
5 3
**输出样例**
2
```

###### 【数据范围与提示】

n≤100，m≤2000

##### *Problem#14* 产生数

###### 【题目描述】

给出一个整数 n（ n < 10^30) 和 k 个变换规则（k <= 15）。
规则：
一位数可变换成另一个一位数：
规则的右部不能为零。

```
例如：n=234。有规则（k＝2）：
　　　2－> 5
　　　3－> 6
```

上面的整数 234 经过变换后可能产生出的整数为（包括原数）:

```
　　　234
　　　534
　　　264
　　　564
```

共 4 种不同的产生数
问题：给出一个整数 n 和 k 个规则。 
求出：经过任意次的变换（0次或多次），能产生出多少个不同整数。仅要求输出个数。

###### 【输入格式】

```
　　n k
　　x1 y1
　　x2 y2
　　... ...
　　xn yn
```

###### 【输出格式】

一个整数（满足条件的个数）

###### 【样例】

```
**输入样例**
234  2
2  5
3  6
**输出样例**
4
```


