## 第三节          堆及其应用

##### *Problem#1* 堆

###### 【题目描述】

如题，初始小根堆为空，我们需要支持以下3种操作：

操作1： 1 x 表示将x插入到堆中

操作2： 2 输出该小根堆内的最小数

操作3： 3 删除该小根堆内的最小数

###### 【输入格式】

第一行包含一个整数N，表示操作的个数

接下来N行，每行包含1个或2个正整数，表示一次操作

###### 【输出格式】

包含若干行正整数，每行依次对应一个操作2的结果。

###### 【样例】

```
**样例输入**
5
1 2
1 5
2
3
2
**样例输出**
2
5
```



##### *Problem#2* 合并果子

###### 【题目描述】

在一个果园里，多多已经将所有的果子打了下来，而且按果子的不同种类分成了不同的n堆。多多决定把所有的果子合成一堆。

每一次合并，多多可以把两堆果子合并到一起，消耗的体力等于两堆果子的重量之和。可以看出，所有的果子经过n-1次合并之后，就只剩下一堆了。多多在合并果子时总共消耗的体力等于每次合并所耗体力之和。

因为还要花大力气把这些果子搬回家，所以多多在合并果子时要尽可能地节省体力。假定每个果子重量都为1，并且已知果子的种类数和每种果子的数目，你的任务是设计出合并的次序方案，使多多耗费的体力最少，并输出这个最小的体力耗费值。

例如有3种果子，数目依次为1,2,9 。可以先将1 、2 堆合并，新堆数目为3 ，耗费体力为3 。接着，将新堆与原先的第三堆合并，又得到新的堆，数目为12 ，耗费体力为12 。所以多多总共耗费体力=3+12=15 。可以证明15为最小的体力耗费值。

###### 【输入格式】

包括两行，第一行是一个整数 $n（1≤n≤10000）$，表示果子的种类数。第二行包含 $n$个整数，用空格分隔，第 $i$个整数 $a_i（1≤a_i≤20000）$是第$ i$ 种果子的数目。

###### 【输出格式】

包括一行，这一行只包含一个整数，也就是最小的体力耗费值。输入数据保证这个值小于$2^{31}$

###### 【样例】

```
**样例输入**
3
1 2 9
**样例输出**
15
```

###### 【数据范围与提示】

对于$30\%$的数据，保证有$n≤100$；

对于$50\%$的数据，保证有$n≤5000$；

对于全部的数据，保证有$n≤10000$；

##### *Problem#3* 大规模排序

###### 【题目描述】

将n个数从小到大排序

###### 【输入格式】

第一行一个整数 n

第二行 n个整数,表示要排序的数

###### 【输出格式】

一行 n个整数,为从小到大排序后的结果

###### 【样例】

```
**样例输入**
5
4 3 5 1 2
**样例输出**
1 2 3 4 5
```

###### 【数据范围与提示】

$n≤10^5$，出现的数字$≤10^9$

##### *Problem#4* 鱼塘钓鱼

###### 【题目描述】

有N个鱼塘排成一排（N<100），每个鱼塘中有一定数量的鱼，例如：N=5时，如下表：

| 鱼塘编号                                         |  1   |  2   |  3   |  4   |  5   |
| :----------------------------------------------- | :--: | :--: | :--: | :--: | :--: |
| 第1分钟能钓到的鱼的数量（1..1000）               |  10  |  14  |  20  |  16  |  9   |
| 每过1分钟钓鱼数的减少量（1..1000）               |  2   |  4   |  6   |  5   |  3   |
| 当前鱼塘到下一个相邻鱼塘需要的时间（单位：分钟） |  3   |  5   |  4   |  4   |      |

即：在第1个鱼塘中钓鱼第1分钟内可钓到10条鱼，第2分钟内只能钓到8条鱼，……，第5分钟以后再也钓不到鱼了。从第1个鱼塘到第2个鱼塘需要3分钟，从第2个鱼塘到第3个鱼塘需要5分钟，…… 

###### 【编程任务】 　　

给出一个截止时间T(T<1000)，设计一个钓鱼方案，从第1个鱼塘出发，希望能钓到最多的鱼。 　　假设能钓到鱼的数量仅和已钓鱼的次数有关，且每次钓鱼的时间都是整数分钟。

###### 【输入格式】

输入文件共5行，分别表示：

```
　　第1行为N； 
　　第2行为第1分钟各个鱼塘能钓到的鱼的数量，每个数据之间用一空格隔开； 
　　第3行为每过1分钟各个鱼塘钓鱼数的减少量，每个数据之间用一空格隔开； 
　　第4行为当前鱼塘到下一个相邻鱼塘需要的时间； 
　　第5行为截止时间T； 
```

###### 【输出格式】

输出文件仅一个整数（不超过$2^{31}-1$），表示你的方案能钓到的最多的鱼。

###### 【样例】

```
**样例输入**
5
10 14 20 16 9
2 4 6 5 3
3 5 4 4
14
**样例输出**
76
```

##### *Problem#5* 最小函数值

###### 【题目描述】

有n个函数，分别为$F_1,F_2,...,F_n$。定义$F_i(x)=A_i*x^2+B_i*x+C_i(x∈N*)$。给定这些$A_i$、$B_i$和$C_i$，请求出所有函数的所有函数值中最小的$m$个（如有重复的要输出多个）。

###### 【输入格式】

第一行输入两个正整数n和m。 以下n行每行三个正整数，其中第i行的三个数分别位$A_i$、$B_i$和$C_i$。输入数据保证$A_i≤10$，$B_i≤100$，$C_i≤10000$。

###### 【输出格式】

输出将这n个函数所有可以生成的函数值排序后的前m个元素。 这m个数应该输出到一行，用空格隔开。

###### 【样例】

```
**样例输入**
3 10
4 5 3
3 4 5
1 7 1
**样例输出**
9 12 12 19 25 29 31 44 45 54
```

###### 【数据范围与提示】

$n,m<=10 000$

##### *Problem#6* 运输

###### 【题目描述】

现在已知N件商品，和搬运它们其中每一件的费用。现在搬家公司老板Mr.sb决定让我们每次任意选取2件商品。然后这2件商品只算一件商品的费用。但是这个商品的搬运费用是将选出的2个商品的费用之和除以k的运算结果。如此反复。直到只收一件商品的钱。这个就是商店要付的费用。掌柜的想尽可能的少付钱，以便将更多的钱捐给希望工程。所以请你帮他计算一下最少只用付多少钱。

###### 【输入格式】

n，k w1，w2.....wn（每一件物品搬运费用）

###### 【输出格式】

一个数，最少付多少钱

###### 【样例】

```
**样例输入**
5 2
1 2 3 4 5
**样例输出**
1
```

###### 【数据范围与提示】

$n,k<=10000$

##### *Problem#7* 工作安排

![img](http://faioj.brynhild.online/images/2200m/75.jpg)

##### *Problem#8* 黑匣子

###### 【题目描述】

我们使用黑匣子的一个简单模型。它能存放一个整数序列和一个特别的变量i。在初始时刻，黑匣子为空且i等于0。这个黑匣子执行一系列的命令。有两类命令：

```
ADD（x）：把元素x放入黑匣子； 
GET：i增1的同时，输出黑匣子内所有整数中第i小的数。牢记第i小的数是当黑匣子中的元素以非降序排序后位于第i位的元素。 
```

例如一个11个命令的例子：

![img](http://faioj.brynhild.online/images/1339m/1.jpg)

```
现在需要一个有效的算法处理给定的一系列命令。ADD和GET命令至多各有30000个。我们用两个整数序列描述命令序列； 
 （1）A[1..M]：加入黑匣子的元素序列。所有数均为绝对值不超过2000000的整数。在上例中A=（3，1，-4，2，8，-1000，2）。 
 （2）u[1..N]：u[i]表示第i 个GET命令在第u[i]个ADD命令之后。例如上例中u=（1，2，6，6）。 
```

假定自然数序列u[1..N]以非降序排列，N<=M 且对每个p(1<=p<=N)有p<=u[p]<=M

###### 【输入格式】

文件的第一行为M N ，第二行为A[1．．M]，第三行为u[1..N]

###### 【输出格式】

输出黑匣子的处理结果

###### 【样例】

```
**样例输入**
7 4 
3  1 -4 2 8 -1000 2 
1 2 6 6 
**样例输出**
3
3 
1 
2 
```



##### *Problem#9* Fence Repair

###### 【题目描述】

Farmer John想修理牧场栅栏的某些小段。为此，他需要N(1<=N<=20,000)块特定长度的木板，第i块木板的长度为Li(1<=Li<=50,000)。然后，FJ去买了一块很长的木板，它的长度正好等于所有需要的木板的长度和。接下来的工作，当然是把它锯成需要的长度。FJ忽略所有切割时的损失——你也应当忽略它。 FJ郁闷地发现，他并没有锯子来把这块长木板锯开。于是他把这块长木板带到了Farmer Don的农场，想向FD借用锯子。 作为一个有商业头脑的资本家，Farmer Don没有把锯子借给FJ，而是决定帮FJ锯好所有木板，当然FJ得为此付出一笔钱。锯开一块木板的费用，正比于木板的长度。如果这块木板的长度是21，那么锯开它的花费便是21美分。 谈妥条件后，FD让FJ决定切割木板的顺序，以及每次切割的位置。请你帮FJ写一个程序，计算为了锯出他想要的木板，他最少要花多少钱。很显然，按不同的切割顺序来切开木板，FJ的总花费可能不同，因为不同的切割顺序，会产生不同的中间结果。

###### 【输入格式】

第1行: 一个正整数N，表示FJ需要木板的总数

第2..N+1行: 每行包含一个整数，为FJ需要的某块木板的长度

###### 【输出格式】

第1行: 输出一个整数，即FJ完成对木板的N-1次切割的最小花费

###### 【样例】

```
**输入样例**
3
8
5
8
**输出样例**
34
```

###### 【数据范围与提示】

起初，木板的长度为21。第一次切割木板花费21美分，把木板切成长分别为13和8的两块。然后花费1 3美分把长为13的木板切成长为8和5的两块。这样的总花费是21+13=34美分。如果第一次把木板切成长 为16和5的两块，那么第二次切木板的花费就是16美分，这样的总花费就是37美分，比刚才花费34美分的方案来的差。

##### *Problem#10* 刻录光盘

###### 【题目描述】

在FJOI2010夏令营快要结束的时候，很多营员提出来要把整个夏令营期间的资料刻录成一张光盘给大家，以便大家回去后继续学习。组委会觉得这个主意不错！可是组委会一时没有足够的空光盘，没法保证每个人都能拿到刻录上资料的光盘，怎么办呢？！ 　　

DYJ分析了一下所有营员的地域关系，发现有些营员是一个城市的，其实他们只需要一张就可以了，因为一个人拿到光盘后，其他人可以带着U盘之类的东西去拷贝啊！ 　　

他们愿意某一些人到他那儿拷贝资料，当然也可能不愿意让另外一些人到他那儿拷贝资料，这与我们FJOI宣扬的团队合作精神格格不入！！！ 　　

现在假设总共有N个营员（2<=N<=200），每个营员的编号为1~N。DYJ给每个人发了一张调查表，让每个营员填上自己愿意让哪些人到他那儿拷贝资料。当然，如果A愿意把资料拷贝给B，而B又愿意把资料拷贝给C，则一旦A获得了资料，则B，C都会获得资料。 　　

现在，请你编写一个程序，根据回收上来的调查表，帮助DYJ计算出组委会至少要刻录多少张光盘，才能保证所有营员回去后都能得到夏令营资料？

###### 【输入格式】

先是一个数N，接下来的N行，分别表示各个营员愿意把自己获得的资料拷贝给其他哪些营员。即输入数据的第i+1行表示第i个营员愿意把资料拷贝给那些营员的编号，以一个0结束。如果一个营员不愿意拷贝资料给任何人，则相应的行只有1个0，一行中的若干数之间用一个空格隔开。

###### 【输出格式】

一个正整数，表示最少要刻录的光盘数。

###### 【样例】

```
**输入样例**
5
2 4 3 0
4 5 0
0
0
1 0
**输出样例**
1
```

##### *Problem#11* 最优乘车

###### 【题目描述】

H城是一个旅游胜地，每年都有成千上万的人前来观光。为方便游客，巴士公司在各个旅游景点及宾馆、饭店等地都设置了巴士站并开通了一些单程巴士线路。每条单程巴士线路从某个巴士站出发，依次途经若干个巴士站，最终到达终点巴士站。 一名旅客最近到H城旅游，他很想去S公园游玩，但如果从他所在的饭店没有一路巴士可以直接到达S公园，则他可能要先乘某一路巴士坐几站，再下来换乘同一站台的另一路巴士, 这样换乘几次后到达S公园。 现在用整数1,2,…N 给H城的所有的巴士站编号，约定这名旅客所在饭店的巴士站编号为1，S公园巴士站的编号为N。 写一个程序，帮助这名旅客寻找一个最优乘车方案,使他在从饭店乘车到S公园的过程中换车的次数最少。

###### 【输入格式】

文件的第1行是一个数字M（1≤M≤100）表示开通了M条单向巴士线路，第2行是一个数字N（1 < N ≤ 500），表示共有N个车站。从第3行到第M+2行依次给出了第一条到第M条巴士线路的信息。其中第i+2行给出的是第i条巴士线路的信息，从左至右依次按行行驶顺序给出了该线路上的所有站点，相邻两个站号之间用一个空格隔开。

###### 【输出格式】

文件只有一行，为最少换车次数（在0，1，…，M-1中取值），0表示不需换车即可达到。如果无法乘车达到S公园，则输出“NO”。

###### 【样例】

```
**输入样例**
3 
7
6 7
4 7 3 6
2 1 3 5  
**输出样例**
2
```

##### *Problem#12* 最小环问题

###### 【题目描述】

给出一个图G=(V, E)，请写一个程序输出最小环。顶点的标号从1到n（n为图G的顶点数）。 最小环就是指在一张图中找出一个环，使得这个环上的各条边的权值之和最小。

###### 【输入格式】

第一行，n,m，表示定点数和边数.（n<=100） 以下m行，分别为a,b,c三个变量，表示顶点a到顶点b的权值为c

###### 【输出格式】

一行，一个数最小环的值，如果没有则输出“no”。

###### 【样例】

```
**输入样例**
3 3
1 2 3
2 3 3
3 1 3
**输出样例**
9
```

##### *Problem#13* 有向图的强连通分量

###### 【题目描述】

给出一个有向图G=(V,E)，请写一个程序就出图的强连通分量。顶点的标号1从n到（为n图G的顶点数）。

###### 【输入格式】

第一行，n,m，表示定点数和边数.

以下m行，分别为a,b两个变量，表示顶点a到顶点b有弧

###### 【输出格式】

一行，强连通分量的个数

###### 【样例】

```
**输入样例**
5 7
1 4
2 1
2 5
3 2
4 1
5 1 
5 3
**输出样例**
2
```

###### 【数据范围与提示】

n≤100，m≤2000

##### *Problem#14* 产生数

###### 【题目描述】

给出一个整数 n（ n < 10^30) 和 k 个变换规则（k <= 15）。
规则：
一位数可变换成另一个一位数：
规则的右部不能为零。

```
例如：n=234。有规则（k＝2）：
　　　2－> 5
　　　3－> 6
```

上面的整数 234 经过变换后可能产生出的整数为（包括原数）:

```
　　　234
　　　534
　　　264
　　　564
```

共 4 种不同的产生数
问题：给出一个整数 n 和 k 个规则。 
求出：经过任意次的变换（0次或多次），能产生出多少个不同整数。仅要求输出个数。

###### 【输入格式】

```
　　n k
　　x1 y1
　　x2 y2
　　... ...
　　xn yn
```

###### 【输出格式】

一个整数（满足条件的个数）

###### 【样例】

```
输入样例**
234  2
2  5
3  6
**输出样例**
4
```

